<div cg-busy="{promise:myPromise,message:busymsg,backdrop:true}">
    <div id="page-title">
        <h2>Campaign</h2>
        <p>Sort description.</p>
    </div>


    <div class="panel ng-scope">
        <div class="panel-body">
            <div class="example-box-wrapper">
                <div class="row">
                    <div class="col-md-4">
                        <div class="tile-box bg-blue">
                            <div class="tile-header">
                                Total Campaigns
                                <div class="float-right">
                                    <i class="glyph-icon icon-caret-up"></i>
                                    0
                                </div>
                            </div>
                            <div class="tile-content-wrapper">
                                <i class="glyph-icon icon-rocket"></i>
                                <div class="tile-content">
                                    {{campaignData.totalCampaigns}}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="tile-box bg-primary">
                            <div class="tile-header">
                                Running Campaigns
                                <div class="float-right">
                                    <i class="glyph-icon icon-caret-up"></i>
                                    0
                                </div>
                            </div>
                            <div class="tile-content-wrapper">
                                <i class="glyph-icon icon-bullhorn"></i>
                                <div class="tile-content">
                                    {{campaignData.runningCampaigns}}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="tile-box bg-red">
                            <div class="tile-header">
                                Completed Campaigns
                                <div class="float-right">
                                    <i class="glyph-icon icon-caret-up"></i>
                                    0
                                </div>
                            </div>
                            <div class="tile-content-wrapper">
                                <i class="glyph-icon icon-archive"></i>
                                <div class="tile-content">
                                    {{campaignData.completedCampaigns}}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="panel-body">
                            <div class="example-box-wrapper">
                                <div class="row">
                                    <div class="col-md-2">
                                        <a href="javascript:void(0);" title="Example tile shortcut"
                                           class="tile-box tile-box-shortcut btn-primary">
                                            <div class="tile-header">{{consumerBreakupTags[0].tagName}}</div>
                                            <div class="tile-content-wrapper">
                                                <h3 style="padding-top:15px;"><strong>{{consumerBreakupTags[0].tagUserCount}}</strong></h3>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-2">
                                        <a href="javascript:void(0);" title="Example tile shortcut"
                                           class="tile-box tile-box-shortcut btn-warning">
                                            <div class="tile-header">{{consumerBreakupTags[1].tagName}}</div>
                                            <div class="tile-content-wrapper">
                                                <h3 style="padding-top:15px;"><strong>{{consumerBreakupTags[1].tagUserCount}}</strong></h3>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-2">
                                        <a href="javascript:void(0);" title="Example tile shortcut"
                                           class="tile-box tile-box-shortcut btn-danger">
                                            <div class="tile-header">{{consumerBreakupTags[2].tagName}}</div>
                                            <div class="tile-content-wrapper">
                                                <h3 style="padding-top:15px;"><strong>{{consumerBreakupTags[2].tagUserCount}}</strong></h3>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-2">
                                        <a href="javascript:void(0);" title="Example tile shortcut"
                                           class="tile-box tile-box-shortcut btn-lightgray">
                                            <div class="tile-header">{{consumerBreakupBadge[0].badgeName}}</div>
                                            <div class="tile-content-wrapper">
                                                <h3 style="padding-top:15px;"><strong>{{consumerBreakupBadge[0].badgeUserCount}}</strong></h3>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-2">
                                        <a href="javascript:void(0);" title="Example tile shortcut"
                                           class="tile-box tile-box-shortcut btn-yellow">
                                            <div class="tile-header">{{consumerBreakupBadge[1].badgeName}}</div>
                                            <div class="tile-content-wrapper">
                                                <h3 style="padding-top:15px;"><strong>{{consumerBreakupBadge[1].badgeUserCount}}</strong></h3>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-2">
                                        <a href="javascript:void(0);" title="Example tile shortcut"
                                           class="tile-box tile-box-shortcut btn-gray">
                                            <div class="tile-header">{{consumerBreakupBadge[2].badgeName}}</div>
                                            <div class="tile-content-wrapper">
                                                <h3 style="padding-top:15px;"><strong>{{consumerBreakupBadge[2].badgeUserCount}}</strong></h3>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>



    <div class="panel">
        <div class="panel-body">
            <div class="example-box-wrapper">
                <div id="datatable-tabletools_wrapper" class="dataTables_wrapper form-inline">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="glyph-icon icon-search"></i></span>
                                <input type="text" class="form-control" placeholder="Search..." ng-model="filterData">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <button class="btn btn-alt btn-hover btn-danger pull-right">
                                <span ng-click="goToCreateCampaign();">Create Campaign</span>
                                <i class="glyph-icon icon-arrow-right"></i>
                            </button>
                        </div>
                    </div><table id="datatable-tabletools" class="table table-striped table-bordered dataTable" cellspacing="0" width="100%" role="grid" aria-describedby="datatable-tabletools_info" style="width: 100%;">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>
                                    <a ng-click="orderByField='campaignName'; reverseSort = !reverseSort" style="font-weight: bolder; cursor: pointer">
                                        Campaign Name<span ng-show="orderByField == 'campaignName'"><span ng-show="!reverseSort"><i class="icon-chevron-up"></i></span><span ng-show="reverseSort"><i class="icon-chevron-down"></i></span></span>
                                    </a>
                                </th>
                                <th>
                                    <a ng-click="orderByField='campaignName'; reverseSort = !reverseSort" style="font-weight: bolder; cursor: pointer">
                                        Campaign Goal<span ng-show="orderByField == 'campaignName'"><span ng-show="!reverseSort"><i class="icon-chevron-up"></i></span><span ng-show="reverseSort"><i class="icon-chevron-down"></i></span></span>
                                    </a>
                                </th>
                                <th>
                                    <a ng-click="orderByField='campaignName'; reverseSort = !reverseSort" style="font-weight: bolder; cursor: pointer">
                                        Created Date<span ng-show="orderByField == 'campaignName'"><span ng-show="!reverseSort"><i class="icon-chevron-up"></i></span><span ng-show="reverseSort"><i class="icon-chevron-down"></i></span></span>
                                    </a>
                                </th>
                                <th>
                                    <a ng-click="orderByField='campaignName'; reverseSort = !reverseSort" style="font-weight: bolder; cursor: pointer">
                                        Converted<span ng-show="orderByField == 'campaignName'"><span ng-show="!reverseSort"><i class="icon-chevron-up"></i></span><span ng-show="reverseSort"><i class="icon-chevron-down"></i></span></span>
                                    </a>
                                </th>
                                <th>
                                    <a ng-click="orderByField='campaignName'; reverseSort = !reverseSort" style="font-weight: bolder; cursor: pointer">
                                        Progress<span ng-show="orderByField == 'campaignName'"><span ng-show="!reverseSort"><i class="icon-chevron-up"></i></span><span ng-show="reverseSort"><i class="icon-chevron-down"></i></span></span>
                                    </a>
                                </th>
                                <th>
                                    <a ng-click="orderByField='campaignName'; reverseSort = !reverseSort" style="font-weight: bolder; cursor: pointer">
                                        Status<span ng-show="orderByField == 'campaignName'"><span ng-show="!reverseSort"><i class="icon-chevron-up"></i></span><span ng-show="reverseSort"><i class="icon-chevron-down"></i></span></span>
                                    </a>
                                </th>
								<th>
								</th>
							</tr>

                        </thead>

                        <tbody>
                            <tr role="row" ng-repeat="c in tableData =(campOverview.campaignList | orderBy:orderByField:reverseSort | filter: filterData)" style="cursor:pointer">
                                <td ng-click="cDetailsPopup(c);">{{$index+1}}</td>
                                <td ng-click="cDetailsPopup(c);">{{ c.campaignName }}</td>
                                <td ng-click="cDetailsPopup(c);">{{ c.campaignGoal }}</td>
                                <td ng-click="cDetailsPopup(c);">{{ c.createdDate }}</td>
                                <td ng-click="cDetailsPopup(c);">{{ c.converted }}</td>
                                <td ng-click="cDetailsPopup(c);">
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
                                            <span class="sr-only">20% Complete</span>
                                        </div>
                                    </div>
                                </td>
                                <td ng-click="cDetailsPopup(c);">{{ c.status }}</td>
								<td><a ng-click="stopCampaign(c.campaignId);" data-toggle="modal" data-target="#stopModal" class="btn btn-round btn-danger">
										<i class="glyph-icon icon-ban"></i>
									</a>
								</td>
							</tr>

                        </tbody>
                    </table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="datatable-tabletools_info" role="status" aria-live="polite">Showing 1 to 10 of 57 entries</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_bootstrap" id="datatable-tabletools_paginate"><ul class="pagination"><li class="previous disabled"><a href="#">Previous</a></li><li class="active"><a href="#">1</a></li><li><a href="#">2</a></li><li><a href="#">3</a></li><li><a href="#">4</a></li><li><a href="#">5</a></li><li class="next"><a href="#">Next</a></li></ul></div></div></div>
                </div>
            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 style="color:#3498db;font-weight:bold;" id="myModalLabel">{{display.campaignName}}</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <table style="width:100%" class="table hover-popup">
                        <tbody>
                            <tr>
                                <td>
                                    <div class="total-customer" id="popup-view">
                                        <h6 style="color:#00bca4">Total Customers</h6>
                                        <span style="color:#808080">{{display.totalCustomers}}</span>
                                    </div>
                                </td>
                                <td>
                                    <div class="target-group">
                                        <h6 style="color:#00bca4"> Badges </h6>
                                        <span style="display:block;text-align:left;color:#808080;" ng-repeat="d in targetGroup.badgeDistribution" ng-class="{'color-gold' : $index%5==0, 'color-red' : $index%5==1, 'color-orange' : $index%5==2, 'color-green' : $index%5==3, 'color-gray' : $index%5==4}">{{d.badgeName}}:{{d.badgeUserCount}}</span>
                                    </div>
                                </td>
                                <td>
                                    <div class="target-group">
                                        <h6 style="color:#00bca4"> Tags </h6>
                                        <span style="display:block;text-align:left;color:#808080;" ng-repeat="d in targetGroup.tagDistribution" ng-class="{'color-gold' : $index%5==0, 'color-red' : $index%5==1, 'color-orange' : $index%5==2, 'color-green' : $index%5==3, 'color-gray' : $index%5==4}">{{d.tagName}}:{{d.tagUserCount}}</span>
                                    </div>
                                </td>
                                <td>
                                    <div class="target-group-1">
                                        <h6 style="color:#00bca4">Validity</h6>
                                        <div class="validity"><span style="color:#808080" class="validity-date-1">{{display.startDate}}</span> to <span style="color:#808080" class="validity-date-2">{{display.endDate}}</span></div>
                                    </div>
                                </td>
                            </tr>
                    </table>
                    <button class="btn btn-blue-alt" style="float:right;">
                        <i class="glyph-icon icon-line-chart"></i>
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>


<div class="modal fade" id="stopModal" role="dialog">
    <div class="modal-dialog">
    
      <div class="modal-content">
       <div class="alert-modal-spacing">
        <div class="modal-body" ng-if="voila">
          <p> The campaign delivery has stopped but the campaign is still active. </p>
        </div>
        <div class="modal-body" ng-if="oops">
          <p> Some technical error occured. Try again later </p>
        </div>
       </div> 
        <div class="modal-footer">
          <button type="button"  ng-click="alertPop()" class="btn btn-default" data-dismiss="modal" style="margin-left:10px">OK</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        </div>
      </div>
      
    </div>
  	</div>